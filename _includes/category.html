<!-- Composition grid -->
{%- assign category      = page.title -%}
{%- assign category_slug = category | slugify -%}
{%- assign artists_obj   = site.data.compositions[category] -%}

{%- if artists_obj -%}
  {%- for art in artists_obj -%}
    {%- assign artist_name = art[0] -%}
    {%- assign artist_slug = artist_name | slugify -%}
    {%- assign songs       = art[1] | sort: "date" | reverse -%}

    <div class="w3-container">
      <br><h5>{{ artist_name }}</h5>
    </div>

  <div class="w3-row-padding w3-grayscale">
      {%- for s in songs limit:4 -%}
        {%- assign file_url = category_slug | append:'/' | append:artist_slug | append:'/' | append:s.file -%}
        {%- assign pdf_url  = '/assets/compositions/' | append:file_url | append: '.pdf' -%}
        {%- assign img_url  = '/assets/compositions/' | append:file_url | append: '.jpg' -%}
        {%- assign page_url = '/' | append:file_url | append:'/' -%}

        <div class="w3-col l3 m6 s12" style="margin-bottom:16px;">
          <a href="{{ pdf_url }}" class="w3-card w3-white w3-hover-shadow" style="display:block; text-decoration:none;">
            <div class="thumb-box">
              <img src="{{ img_url }}" alt="{{ artist_name }} â€” {{ s.song }}">
            </div>
            <div class="w3-container">
              <p class="w3-small w3-text-grey truncate">{{ artist_name }}</p>
              <p class="w3-medium truncate"><b>{{ s.song }}</b></p>
            </div>
          </a>
        </div>
      {%- endfor -%}
    </div>
  {%- endfor -%}
{%- else -%}
  <p class="w3-text-grey">No compositions found for {{ category }}.</p>
{%- endif -%}
